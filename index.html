<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Wicked Willow • Curse of Atchison</title>
<meta name="theme-color" content="#111017">
<style>
  :root{ --bg:#0c0a12; --panel:#131022; --ink:#f0e6ff; --muted:#c8b8ffb3; --accent:#9ef0c9; --danger:#ff6b6b; --coin:#f6c945; --glow:#52ffb380; }
  *{box-sizing:border-box} html,body{height:100%}
  body{ margin:0; background: radial-gradient(1200px 700px at 70% -10%, #1b1533 0%, var(--bg) 45%, #09070f 100%); color:var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; line-height:1.55; overflow-x:hidden; }
  .wrap{max-width:940px; margin:0 auto; padding:16px}
  header{ position:sticky; top:0; z-index:5; backdrop-filter: blur(8px); background:linear-gradient(180deg, #0f0c18dd, #0f0c18cc 60%, transparent); border-bottom:1px solid #30264a; box-shadow: 0 10px 30px #000d; }
  .title{display:flex; gap:12px; align-items:center; justify-content:space-between;}
  .brand{display:flex; gap:14px; align-items:center;}
  .sigil{ width:40px; height:40px; border-radius:50%; background: conic-gradient(from 210deg, #3efac4, #8bdcff, #b28bff, #3efac4); box-shadow: 0 0 16px var(--glow), inset 0 0 12px #0009; position:relative; }
  .sigil:after{content:"★"; position:absolute; inset:0; display:grid; place-items:center; color:#0a0a12; font-size:18px; text-shadow:0 0 10px #000;}
  h1{margin:0; font-weight:800; letter-spacing:.5px; font-size:20px}
  .progress{display:flex; align-items:center; gap:8px; margin-top:10px;}
  .bar{flex:1; height:10px; background:#1b1730; border-radius:99px; overflow:hidden; box-shadow: inset 0 0 0 1px #30264a;}
  .bar > i{display:block; height:100%; width:0%; background:linear-gradient(90deg, #48f8c5, #b693ff); box-shadow: 0 0 16px var(--glow) inset, 0 0 12px var(--glow)}
  .coins{display:flex; gap:6px}
  .coin{ width:22px; height:22px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #fff8 0 20%, transparent 21%), linear-gradient(145deg, #ffeaa6, var(--coin));
         border:1px solid #e0b94a; box-shadow: inset 0 0 6px #966f00, 0 2px 4px #000a; filter:grayscale(100%) opacity(.4);}
  .coin.got{filter:none}
  .grid{display:grid; gap:16px; grid-template-columns:1fr; padding:20px 16px 56px;} @media(min-width:900px){ .grid{grid-template-columns:1fr 1fr} }
  .card{ background: linear-gradient(180deg, #17122b, #100c1d); border:1px solid #30264a; border-radius:16px; box-shadow: 0 20px 50px #000c, inset 0 0 0 1px #0008; overflow:hidden;}
  .card .head{ padding:16px; display:flex; align-items:center; gap:10px; border-bottom:1px solid #2a2243; background: linear-gradient(180deg, #1a1433, transparent); }
  .tag{font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid #39465a; color:#a7c5c0; background: linear-gradient(180deg, #0f1e1a, #0b1412);}
  .card h2{margin:0; font-size:18px}
  .card .body{padding:16px; color:var(--muted)}
  .letter{background:#0e1520; border:1px dashed #3a4455; border-radius:12px; padding:12px; margin:10px 0; position:relative;}
  .letter:before{content:"Wax Seal"; position:absolute; right:-8px; top:-8px; font-size:10px; padding:6px 8px; border-radius:8px; background:linear-gradient(180deg, #2d243f, #1d1630); border:1px solid #4b3a77; color:#d9c8ff; box-shadow:0 6px 14px #0008; transform:rotate(6deg) }
  .riddle-input{display:flex; gap:8px; margin-top:12px;}
  .riddle-input input{flex:1; padding:10px 12px; border-radius:10px; border:1px solid #393057; background:#0f0c18; color:#f0e6ff;}
  .result{margin-top:8px; font-weight:700} .ok{color: var(--accent)} .no{color: var(--danger)}
  .hint{font-size:12px; color:#9db2a9}
  .cta{ display:none; margin:20px 0 40px; text-align:center;}
  .cta a{ display:inline-block; background:linear-gradient(180deg, #1d1733, #151029); border:1px solid #3c3161; color:var(--ink); padding:12px 16px; border-radius:12px; font-weight:800; text-decoration:none; box-shadow:0 6px 16px #0009, inset 0 0 0 1px #0006; }
</style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="title">
      <div class="brand">
        <div class="sigil" aria-hidden="true"></div>
        <div>
          <h1>Wicked Willow · Curse of Atchison</h1>
          <div class="progress"><div class="bar"><i id="barFill" style="width:0%"></i></div>
            <div class="coins"><div class="coin" id="c1"></div><div class="coin" id="c2"></div><div class="coin" id="c3"></div><div class="coin" id="c4"></div><div class="coin" id="c5"></div></div>
          </div>
        </div>
      </div>
    </div>
    <p class="small" style="color:#c8b8ffb3;margin:8px 0 0">Solve the 5 lore riddles to mint your coins. Round 2 moves to its own clean page.</p>
  </div>
</header>

<main class="wrap">
  <div class="grid" id="grid">
    <!-- 1 -->
    <section class="card"><div class="head"><span class="tag">1 · The Ridge</span><h2>Ashes & Echoes</h2></div>
      <div class="body">
        <div class="letter"><strong>Lantern Note</strong><div class="content"><p>“Truth warned you, but greed made you deaf…”</p></div></div>
        <p><strong>Riddle:</strong> I eat what I’m fed, yet I perish if I drink; I dance when I’m hungry and leave only char and stink. What am I?</p>
        <div class="riddle-input"><input id="a1" placeholder="Type your answer…"/><button data-check="1">Submit</button></div><div id="r1" class="result"></div>
        <p class="hint" id="h1" style="display:none">Hint: Lanterns are its cradle; rain is its grave.</p>
      </div>
    </section>
    <!-- 2 -->
    <section class="card"><div class="head"><span class="tag">2 · Mine Mouth</span><h2>The Warning</h2></div>
      <div class="body">
        <div class="letter"><strong>Miner’s Pocket Letter</strong><div class="content"><p>“If the song stops, turn back…”</p></div></div>
        <p><strong>Riddle:</strong> I save you by surrendering breath, a sentinel whose voice foretells death. What am I?</p>
        <div class="riddle-input"><input id="a2" placeholder="Type your answer…"/><button data-check="2">Submit</button></div><div id="r2" class="result"></div>
        <p class="hint" id="h2" style="display:none">Hint: A tiny singer in a cage.</p>
      </div>
    </section>
    <!-- 3 -->
    <section class="card"><div class="head"><span class="tag">3 · The Dry River</span><h2>Salt & Bones</h2></div>
      <div class="body">
        <div class="letter"><strong>River-Binding Spell</strong><div class="content"><p>“Break my course and still my tongue…”</p></div></div>
        <p><strong>Riddle:</strong> With banks but no vault, a mouth without teeth, I flee to the ocean yet never grow feet. What am I?</p>
        <div class="riddle-input"><input id="a3" placeholder="Type your answer…"/><button data-check="3">Submit</button></div><div id="r3" class="result"></div>
        <p class="hint" id="h3" style="display:none">Hint: Its bed is not for sleeping.</p>
      </div>
    </section>
    <!-- 4 -->
    <section class="card"><div class="head"><span class="tag">4 · The Cottage</span><h2>The Mayor’s Head</h2></div>
      <div class="body">
        <div class="letter"><strong>Whisper from the Box</strong><div class="content"><p>“Heh… look what she left me—only weight on my words.”</p></div></div>
        <p><strong>Riddle:</strong> Read me forward and I burden you; read me backward and I bother you not. What am I?</p>
        <div class="riddle-input"><input id="a4" placeholder="Type your answer…"/><button data-check="4">Submit</button></div><div id="r4" class="result"></div>
        <p class="hint" id="h4" style="display:none">Hint: A three-letter unit.</p>
      </div>
    </section>
    <!-- 5 -->
    <section class="card"><div class="head"><span class="tag">5 · Town Square</span><h2>The Accusation</h2></div>
      <div class="body">
        <div class="letter"><strong>Willow’s Poem (Acrostic)</strong><div class="content">
          <p><b>T</b>he hills remember what the town forgot.</p>
          <p><b>R</b>estore the lantern; let blame burn out.</p>
          <p><b>U</b>ndo the oath of anger with a single word.</p>
          <p><b>C</b>ease your shouting; let silence mend.</p>
          <p><b>E</b>nd what began in fear—begin again in truth.</p>
        </div></div>
        <p><strong>Question:</strong> Read the acrostic. Enter the single word to end the curse.</p>
        <div class="riddle-input"><input id="a5" placeholder="Type the one word…"/><button data-check="5">Submit</button></div><div id="r5" class="result"></div>
        <p class="hint" id="h5" style="display:none">Hint: Take the first letter of each line.</p>
      </div>
    </section>
  </div>

  <div class="cta" id="cta">
    <a href="round2.html">Proceed to Round 2 →</a>
  </div>
</main>

<script>
const LVL1_ANS = {1:'fire',2:'canary',3:'river',4:'ton',5:'truce'};
const ids=['a1','a2','a3','a4','a5'], rs=['r1','r2','r3','r4','r5'];
const inputs=ids.map(id=>document.getElementById(id)); const results=rs.map(id=>document.getElementById(id));
const coins=[...document.querySelectorAll('.coin')]; const bar=document.getElementById('barFill'); const cta=document.getElementById('cta');
function getState(){ try{return JSON.parse(localStorage.getItem('willow_qr')||'{}')}catch{return{}} }
function setState(s){ localStorage.setItem('willow_qr', JSON.stringify(s)); }
function updateProgress(){ const s=getState(); const count=[1,2,3,4,5].filter(k=>s['s'+k]).length; bar.style.width=(count/5*100)+'%'; cta.style.display = count===5 ? 'block':'none'; }
function award(i){ const s=getState(); if(!s['s'+i]){ s['s'+i]=true; setState(s);} coins[i-1].classList.add('got'); }
inputs.forEach((_,idx)=>{ const btn=document.querySelector(`button[data-check="${idx+1}"]`); btn.onclick=()=>{ const val=(inputs[idx].value||'').trim().toLowerCase(); if(val===LVL1_ANS[idx+1]){ results[idx].textContent='Correct. Coin minted! ✨'; results[idx].className='result ok'; award(idx+1); updateProgress(); } else { results[idx].textContent='Not quite. Try again.'; results[idx].className='result no'; } }; });
(function boot(){ const s=getState(); for(let i=1;i<=5;i++){ if(s['s'+i]) coins[i-1].classList.add('got'); } updateProgress(); })();

// ROUTER: if QR params are present, forward them to Round 2 (keeps sticker compatibility)
(function routeQr(){
  const p=new URLSearchParams(location.search);
  const has = p.has('t')||p.has('token')||p.has('fx')||p.has('gain')||p.has('curse')||p.has('wipe');
  if(has){ location.replace('round2.html?'+p.toString()); }
})();
</script>
</body>
</html>
